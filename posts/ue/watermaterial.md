---
title: "WaterMaterial"
categories: ["UE"]
date: "2023-11-21"
created: "2023-11-21T09:31:00.000Z"
updated: "2026-02-16T11:48:00.000Z"
notion_url: "https://www.notion.so/WaterMaterial-0ecfb646d5554bdcab33e1a859c3d5f6"
database: "UE Technical"
---


![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/a5b3141c-34f5-4bf9-ba31-20e36adb4fb7/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054939Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=0c954253a3abe52aab23f3cc57aa425fde0c0206d0a7d7107ef4daedab81e042&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

这是我们通常得到水面到水底深度的公式，最终得到的结果是一个从0到1的渐变Mask，           

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/58a71e0b-c8ff-4e70-bfd8-5daf428afebe/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054939Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=760b7b08c532b1f584af5702681494ee61cd34f97ed5c4d70a0d3df7064ba159&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

最后在加一步控制调整 强度 与 对比度 ，最后clamp既可。

### 颜色

这个时候我们就得到我们最终一个从岸边到深水的从0到1的mask，通过这个mask，我们可以使用lerp函数，去插值两个颜色边可以得到水的一个颜色表现，

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/e1611fcf-c9e7-4469-b3bb-39f4010e30cc/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054939Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=c1f15100c79513a0aeee812303313c92118d5930a1022d28be5cf90c3bf2629b&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

这一步也可以使用LUT的方式来采样颜色，已到达更好控制的效果。我们可以去PS里面做一张LUT的色彩控制表，

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/d9b1ed62-40b2-4ffe-8620-803e88244dc1/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054939Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=6cd9dd76e1ad339b82e48eb8aa2ba5efc046d631f10374000c2e0c5f159f890a&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

最终我们导出的LUT表，我用的是256*1像素，那么我们uv的U就是我们从0到1的深度渐变值，V就可以定值，主要LUT不要压缩，tiling为clamp，不然就会采样到错误位置。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/55caf648-0292-4f37-b97b-40150ec8eaa6/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054939Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=6e40d92bb41b36a3f73aef4a5b5a4966a7be8a632f57f58ed84e26d5e03bbe34&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/ef1102ef-e0a9-4cb1-9660-9d3709403c0b/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054939Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=b5856dacaecb2ddb044ce4f39422d6b97139ee092939fc1593bc817c1ca71836&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

颜色这边最终还得和其他效果混合叠加输出 比如白沫、SSS散射。

### 透明度

透明度这边和颜色思路差不多，也是通过深度渐变mask去lerp两个不同的透明度大小，

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/7d45cfeb-d32f-4057-b3a9-6d0b416550fd/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054939Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=38b3a819d4664f9681aec974ddb75880e09afd35213aa69682a7e4ec6f93f876&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

之后有个稍微特殊的地方，就可以可能特别近的岸边和特别远的远景，透明度还得单独处理一下，这里我让特别近的岸边水更加透明，显的水比较清澈，很远处的水不透明，显的更深邃一点。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/ef09cd90-17fb-42cd-bca2-e66cfb3f9968/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054939Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=89787f79d58c0edf0214e5b90ac3988208ca921a21f97484469b247d4b858247&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

最后还加上 菲涅尔 和 顶点色对透明度影响输出既可。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/1baffeb5-f919-4dda-9539-2cbd4b3ef65b/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054939Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=e0764488721fa77e80eca76549ce7fd9f005e0159d2812cfa7c8f59bf94e0bec&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)


### 法线

法线这边走的是四向偏移法线 与 flowmap法线 混合的方案。(这里还有距离场等等方案暂不介绍了)

首先是四向偏移,uv使用的 世界空间三向投影(低配版)，在uv阶段就插值，结果就是会有分界区域会有一像素偏差 不过也能接受。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/2a1e14b9-1091-41e6-bbf0-da84f11e3604/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=fdf41031495e22c3b0a0106206bfab2e40a92a6b9b5a77953ae10cac8cf14235&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

四向偏移用的和ue内置基本一样，只不过为了优化指令数，我自己封装了一个MF，把里面的贴图采样器设为wrap了而已。

接下来就是平滑法线，也就是与法线 (0,0,1) 做lerp。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/c33bf6a3-227a-46e7-a7e6-c08e0fcc6377/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=0533c3e1eb7e097b4a2fd73a11636a009286e7f86f727b9627a8f768df02766f&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

还有一个便是与flowmap 产生的法线做 混合，用的RNM方法具体如下。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/622a302c-7709-4256-8ac5-c2ca25f55f90/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=d0e342b48b6e0d0c64d5c4aba39d4952eb3346da339f04763a8e5c6021c539c9&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

最后归一化便可以输出。

### WPO

这里我用的和神海有点相似的方案，就是WPO加flowmap。WPO我选的是正弦波，并没有用Gerstner波

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/bb4f18ee-00c9-41d1-8f57-92c306fa12db/water.gif?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=977a218761b58837320443a4717782eec82f8b40ad7343f27dc7d45a0eb8d75d&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

大体是这样

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/5ee00713-d14e-41c5-a879-401c3f345c59/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=eeafde3439d1b83fd3fca955ee747142569f5d39c0977a243fb97655890c3a4b&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

顶点色R是控制混合区域，顶点色B是流速控制波浪的大小，流速缓慢的地方波浪小，湍急的地方波浪大。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/31e841fd-653d-4fbf-bde4-2b9a97e9fc3c/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=950542ab7fef46eacbaa42bad46385efdf8d7369ff88e5dfb03aba8464d7ff29&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

波形状就是这段

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/68fbb62e-a59f-4c2d-9198-93f6147dd1e0/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=89e7efea6555e383a76ab66284b136eabae7289ba30212581a67d47a2e188704&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

最后根据深度加一个波强度的淡入淡出既可。

### 焦散

焦散其实挺简单的，和四向偏移法线差不多，我们使用两个方向来对焦散做偏移既可，只不过需要多注意注意 UV，我们需要采到水底的uv。具体如下

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/366dfd96-3174-4a0f-8ccc-49d2ade5ef0b/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=035c6c720284a0e73b3e59f00d7286707f944da73e969853fafaf549d9abe154&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

这样就能达到焦散在水底的感觉啦


![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/94186c7d-55fc-4ca5-ad71-99becadff946/waterCaustics.gif?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=05b291ec7b9d33333d3c70559d3ae3c6ec7108666230a172653be6fe6b7ac326&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

在用DepthFade控制焦散的淡入淡出既可。

我们还可以使用SceneColor，也就是用屏幕亮度来判断阴影处与光亮处，来控制焦散的亮度。

### 假高光

这一步主要是在UE里面做，在Unity里面还好，UE里面因为shading mode固定，没法调整光照模型，这个主要是帮助水面有波光粼粼的效果

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/373922cf-ad65-4542-a6e8-12ade8dfa4b3/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=049dce2082b5f9c8e871f30511becb831fd8b6eee05e12200ec5a3e9c44f75e0&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/6c05cecf-99c4-48cb-a91e-2b36577d389c/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=763721249f866b4f82eac00d01a428d886ff53f01c89413337f526033b9a153b&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

这个就是自己算一层高光加在自发光里面充当一层假的高光，麻烦的地方在于需要用蓝图传递一个光向量(延迟渲染拿不到光方向)，然后将光向量存储在MPC中，材质再通过MPC得到光的方向就可以计算高光了。为了波光粼粼的效果我们也可以直接用采样对应需要的光斑贴图。

### FlowMap

对应flowmap贴图的生产在houdini里面制作，RG通道存储的是速度，B是白沫，A存深度(可选)。UE里面其实有对应的FlowMaps_Simple，我们只需要传对应的参数即可，这里我简单优化过，如果用单通道的白沫图，我们就可以把白沫与法线两张图Pack起来一起传，算完之后再Unpack就好。

UV的选择这里需要注意Flowmap贴图的采样用模型自身UV采样，得到RG通道之后将 0到1区间的颜色值转换到-1到1区间的向量值传入。法线与白沫贴图的UV需要传入世界空间UV，这样不同的水面法线与白沫也可以连续起来。(不同Flowmap贴图烘出来已经接缝处已经是连续的啦)

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/6f43a299-a0a8-44e2-b856-7174e619efe3/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=e43959290f3559d384ebb7235e4a5e387b52c9c575f75e2b33874167c83ff671&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/1ff574db-0471-4b5b-9f04-f8486b09cf05/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=d4056ee72977fa32dbc942b7f57c0326e9744a6b1579088bd3731143f1401fb0&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

FlowmapSimple 里面逻辑也很简单，主要就两张贴图循环交替的移动，造就视觉上的一个移动假象，波形大概是这样，交替迭代，然后动态lerp两张图片的结果既可。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/3da1de45-3b4d-4a67-91a0-886edf74cd88/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=2b96473aba9d83f2efcaea01f295bf1e7b91c8d5876c069f0d1269374e1c86e9&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

这里注意一下，因为坐标系的缘故，需要将X轴翻转一下。贴图采样器也可以改为 Warp。


最后还有一点需要注意 

折射我们需要改为 Pixel Normal Offset，否则水面边缘会有撕裂。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/826ac7c4-16ea-47db-b704-f30f496469c3/17822153-f3f4-4623-a3df-e6a2b2579867/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664TA3KORP%2F20260218%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260218T054940Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQC23PRwBkIjOqreC1Gdf%2FY%2FWBUaQzQniyRyH6riEGHqtwIgL0XSQbHrpCd4VVTHlvRS1bI%2BXbmBBxt2Ofd2aR6PckEq%2FwMIXhAAGgw2Mzc0MjMxODM4MDUiDAlVOFCBLDx6PcVBZSrcAwgoH0hD%2B6%2B%2BA%2F1nDzWmGWfPEQgcM9K9DiL0flta%2FsyaZ%2FNl52lyIZDeQjCxwPyLuDIAK7uS7jN2yUVZztVnIDX1BqPdBIFPoEHcL2T3zVAFiJ6YHy38%2FO%2FVmTlW5nkGP1%2FPMH1wropKOOgEpDt3QBnM2WhYBgttm%2BIvExSekSoykTYKQXwUwGpCjjoIFpQt8WPyqHXw9x9U4%2BKwRJ2iVReKNjlysZgLbbighWukhoVA10SZza6LhIVCePTxG0fh1U4rKBdpU22QMrYtW%2B2r3lE82%2F0d33V7odG6birscG7Om8oIit268j7iatSpa2TewbbqQcTeISHbNCzhcW9WPISe0WURRZJOGmc8MRjG0NfmNcYMZLsORZ8Xi8roWQokcMdE8w37N9SlEe8xMoaVxftsIpKkdJYQ81D9Gq1YBKk9rqKPVnLdSewfX0Hi5zc7IXNPjs%2BnB0oEE4P%2FTew9lgCSHrwp01orFiu7gOT3g%2F1GaBHSsDd7Bw47muUaaeCA7GJ9N0%2Feiml7R4iNDIJPSagC9h%2FQf8o32wNNj0Fdv1D1BoyaXFu%2ByqPhRX%2FasdV1SBt1AgGEdX6wD6HBv3OJzCRwmTKxUiChZYRAGY51SQ3RvEBl8nHhaDSerMSUMMCV1cwGOqUBbyturqIJDKLeSsNaGGgsbAXJXsde3PEAqOO7w0otfwy9GkC3I2jJN91qf%2FX7gb9Qv4%2FRKR3F4O8XxZBv4zMoTpcmxbeHENf1MR71nzeQVgEC1HeUjsQfnHveysn441cNoANMiDC3QK0YtR%2Bs%2Fd93QOS4HgLD3fB%2FUCdyqDkHRkXFhUverzG1ZKFOaymXgaTEsNz65hkf7vhooMoSbG%2FBOc3RLYwd&X-Amz-Signature=175e2a68cb993f38358eb93a2b0ff48320b3119d653e69c1e098f906e8dce5ca&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

